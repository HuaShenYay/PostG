# 毕业设计算法对比与系统升级计划

根据您的毕业设计要求，我制定了以下实施计划，涵盖后端算法实现、前端可视化对比及系统集成。

## 1. 后端算法核心开发 (backend/algorithm\_comparison.py)

我们将创建一个独立的算法对比模块，不影响现有推荐逻辑。

* **传统协同过滤 (Baseline)**: 实现基于用户的协同过滤 (User-based CF)，使用 Pearson 相关系数计算用户相似度。

* **现在使用的优化算法 (Optimized)**: 确定当前系统使用的算法是"基于主题增强的协同过滤"。用现在的算法进行对照。

* **评估指标引擎**: 实现 Precision, Recall, F1-Score, RMSE 的自动计算。

* **API 接口**: 在 `app.py` 中新增 `/api/comparison/run` 接口，接收参数 (K值, 测试集比例, $\alpha$权重) 并返回对比结果。

## 2. 数据库与数据准备

* **基准数据**: 确认 `Poem` 表中 `Real_topic` 字段的使用。若为空，利用你大语言模型的能力。阅读完原文后，为每一首诗思考一个真实的主题。

* **数据集工具**: 支持从系统当前 `Review` 表导出数据集，也支持上传标准 CSV 格式评分数据 (user\_id, poem\_id, rating) 用于测试。

* **重要：**如果review表的评论数量不够你进行当前系统算法（bertopic的）完整的对比实验，你可以导入足够数量的评论，来辅助完成。

## 3. 个人中心界面扩展 (frontend/src/views/PersonalAnalysis.vue)

在"个人分析"页面底部新增 **"算法实验控制台" (Algorithm Lab)** 模块：

* **配置面板**:

  * 数据集选择 (系统数据/上传数据)

  * 参数滑块: 邻居数 K (5-50), 测试集比例 (0.1-0.3), 融合权重 $\alpha$

  * "开始实验" 按钮

* **可视化报告区**:

  * **核心指标对比图**: 分组柱状图展示 准确率/召回率/F1。

  * **误差分析图**: 柱状图对比 RMSE (均方根误差)。

  * **实验日志**: 显示具体的数值结果和实验时间。

* **导出功能**: "下载实验报告" 按钮，生成包含图表数据和参数的 JSON/CSV 文件。

## 4. 测试与验证

* **单元测试**: 创建 `tests/test_algorithm.py`，验证两个算法在小数据集上的输出正确性。

* **集成测试**: 验证前端参数能否正确传递至后端，以及结果能否正确渲染。

## 5. 实施步骤

1. **后端**: 创建 `algorithm_comparison.py` 并实现核心算法类。
2. **API**: 在 `app.py` 注册对比接口。
3. **前端**: 修改 `PersonalAnalysis.vue`，集成 ECharts 可视化对比结果。
4. **测试**: 编写并运行测试用例，确保无 bug。

请确认是否按照此计划开始执行？确认后我将首先进行后端算法模块的开发。
