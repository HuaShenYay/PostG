# 修复和优化计划

## 1. 修复logo无法返回主页的功能

**问题分析**：
- 搜索页面的logo已经有`@click="goHome"`事件监听，可以正常返回主页
- 个人万象和全站万象页面的logo缺少点击事件监听，导致无法返回主页

**修复方案**：
- 在个人万象和全站万象页面的`.nav-brand`元素上添加`@click="goHome"`事件监听
- 确保`goHome`方法已经在这两个页面中定义

**修改文件**：
- `c:\PostG\frontend\src\views\PersonalAnalysis.vue`
- `c:\PostG\frontend\src\views\GlobalAnalysis.vue`

## 2. 优化搜索页面搜索框

**问题分析**：
- 搜索框当前只在按下回车键或点击搜索按钮时触发搜索
- 搜索框样式需要与网站整体设计风格保持一致
- 缺少实时搜索功能和防抖机制

**优化方案**：

### 2.1 样式优化
- 调整搜索框尺寸、颜色、边框和占位符样式
- 优化聚焦状态和交互反馈
- 确保与网站整体设计风格统一

### 2.2 功能优化
- 添加`@input`事件监听，实现实时搜索
- 实现防抖机制（300ms延迟），避免频繁请求
- 确保搜索结果更新响应时间不超过300ms
- 优化搜索结果展示

**修改文件**：
- `c:\PostG\frontend\src\views\Search.vue`

## 技术实现细节

### 1. logo修复
```vue
<!-- 在个人万象和全站万象页面的nav-brand元素上添加点击事件 -->
<div class="nav-brand" @click="goHome">
  <span class="logo-text">诗云</span>
  <span class="edition-badge">Zen Edition</span>
</div>

<!-- 确保goHome方法已定义 -->
const goHome = () => router.push('/')
```

### 2. 搜索框优化
```vue
<!-- 添加input事件监听 -->
<n-input 
  v-model:value="searchQuery" 
  placeholder="输入标题、作者、千古名句或意象关键词..." 
  size="large" 
  @keyup.enter="handleSearch" 
  @input="handleInputSearch"
  class="search-bar-zen"
  clearable
  autofocus
>
  <!-- ... -->
</n-input>

<!-- 实现防抖逻辑 -->
const handleInputSearch = debounce(() => {
  if (searchQuery.value.trim()) {
    handleSearch()
  } else {
    searchResults.value = []
  }
}, 300)

<!-- 防抖函数实现 -->
const debounce = (fn, delay) => {
  let timer = null
  return function() {
    clearTimeout(timer)
    timer = setTimeout(() => fn.apply(this, arguments), delay)
  }
}
```

### 3. 样式优化
```scss
.search-bar-zen :deep(.n-input) {
  background: transparent;
  font-size: 18px;
  border-radius: 30px;
  // 优化聚焦状态
  &:focus-within {
    box-shadow: 0 0 0 2px rgba(207, 63, 53, 0.2);
  }
  // 优化占位符样式
  &::placeholder {
    color: var(--text-tertiary);
    font-style: italic;
  }
}
```

## 预期效果

1. **logo修复**：
   - 点击个人万象和全站万象页面的logo能够正确返回主页
   - 保持与搜索页面一致的导航体验

2. **搜索框优化**：
   - 搜索框样式与网站整体设计风格统一
   - 支持实时搜索，输入或删除内容时自动触发搜索
   - 300ms防抖延迟，避免频繁请求
   - 搜索结果更新响应迅速
   - 良好的交互反馈和视觉效果

所有修改将确保不影响网站的其他功能，保持代码的可维护性和性能。